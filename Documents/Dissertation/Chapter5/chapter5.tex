\chapter{Evaluation}

%Examiners expect to find in your dissertation a section addressing such questions as:

%\begin{itemize}
%   \item Were the requirements correctly identified? 
%   \item Were the design decisions correct?
%   \item Could a more suitable set of tools have been chosen?
%   \item How well did the software meet the needs of those who were expecting to use it?
%   \item How well were any other project aims achieved?
%   \item If you were starting again, what would you do differently?
%\end{itemize}

%Such material is regarded as an important part of the dissertation; it should demonstrate that you are capable not only of carrying out a piece of work but also of thinking critically about how you did it and how you might have done it better. This is seen as an important part of an honours degree. 

%There will be good things and room for improvement with any project. As you write this section, identify and discuss the parts of the work that went well and also consider ways in which the work could be improved. 

%Review the discussion on the Evaluation section from the lectures. A recording is available on Blackboard.
\section{Completed work}
I have made sure that I am allowed to use all of the data and third-party libraries used in this project, and have included most of the licenses in the bibliography at the end of this document, or in the Javadoc of my source-code.

I was able to fulfil the large majority of the functional requirements set forth at the start of this project, but I did not have time to ask Aberystwyth University for their records on accessible and/or inaccessible areas on their campuses, which would have let me make sure that the OSM data is updated. This does not have any adverse effects on my system though, as it is still fully capable of planning routes.\\
I did not have time to look into implementing any tracking-functionality either, which would have let me plan routes relative to the user's physical position. This would include running the system on an emulated mobile environment with a simulated GPS-signal, but this functionality is not needed in order for the system to be able to plan routes either.

Route-suggestions (especially through buildings) could probably be significantly improved if OSM's routing-data reflected the university's records on accessibility. Right now the route-planner just assumes that it is possible to travel from one accessible entrance to another within the same building, but when I walked around the Penglais campus to try to identify possible problem-areas, I noticed that some accessible entrances were on floors only connected to other floors via stairs (Like the new automatic doors on the bottom of the Llandinam builing, opposite IBERS). This could prove potentially problematic, but I don't know how to rectify this issue without mapping the interior of buildings, or marking the door as leading to an inaccessible area in the OSM database.

This system is most likely unable to plan routes quickly (and using little memory) if the start and goal Nodes are very far apart. This is because path-finding algorithms that abstract the search-space into larger blocks or sectors usually can't guarantee optimal routes, but justify this by being able to find routes quickly, using little additional memory. This system is aimed at PRMs, a group which includes people like the elderly and wheelchair-users, both of which may struggle to follow longer, sub-optimal routes -- So I have made a concious decision to preserve the optimality of my algorithms and routes by abstracting the search-space less. This does lead to improved runtimes and memory-requirements, but could be improved even further by calculating path-costs between Tower Nodes before searches are performed, and ignoring Pillar Nodes altogether until the route needs to be drawn.

The system is not always able to plan optimal routes. This is usually caused by missing routing-data (See Figure \ref{fig:badDataBadPath} and \ref{fig:longerRoutePRM}), or mislabelling of Nodes and Ways in the OSM database. These routes are optimal in the sense that there exists no better path in the available routing-data, but appear to be sub-optimal when viewed on the map where we are able to visualise the optimal routes ourselves.

The routing-data used to test the system is about a year old, and should probably be replaced by a new, more updated \textit{.osm} file, but I don't want to update this file before handing the project in because this would result in the markers being unable to replicate the routes I show in many of the figures in this report.

If you want to see just how easy it is to update the routing-data used by this system, follow these steps (Last checked 27.September.2016):
\begin{enumerate}
	\item Go to \url{www.openstreetmap.org}
	\item Click on \textquotedblleft Export\textquotedblright
	\item Select any area of the map
	\subitem You do not have to select the Penglais campus of Aberystwyth University; the system should work on data from any urban area, but it has been developed specifically for the Penglais campus.
	\item Click on \textquotedblleft Export\textquotedblright again
	\subitem This will download a \textit{.osm} file covering the area you selected.
	\item move the \textit{.osm} file into the folder containing my source-code, and replace the old \textit{map.osm}.
	\subitem make sure that the new \textit{.osm} file is also called \textquotedblleft \textit{map.osm}\textquotedblright.
	\subsubitem It should be given this name by default, but it is best to make sure.
\end{enumerate}


The Pillar Nodes inside Ways are not removed or skipped until the Way is expanded. This means that the path-cost from Tower Node to Tower Node via the Pillar Nodes between them has to be calculated while the routes are being planned. If the path-cost from Tower Node to Tower Node was calculated before the searches, then the system would resemble a hierarchical path-finder more than it currently does, and runtimes and memory-use could be decreased even further, while still ensuring completeness and/or optimality for complete and/or optimal algorithms.

%This project was started on Friday 24.06.2016, which was a month later than I first expected; I tried to get in touch with a few supervisors, but only a few of them replied to my emails after a couple of weeks. I feel like I've been able to finish quite a few things in the three months since I started though. I was also unable to get in touch with my supervisor for about a month while working on this project, and had no idea why until she returned and told me herself via email.

\section{Future work}
%Future work detailing your ideas about the requirements you didn't have time for.
The map does not currently display the distance of the routes it returns. It stores this value in a variable, but I was unable to find out how to print it on the map.

The system works with routing-data and map-tiles stored locally. Retrieving this data from a third party\cite{geofabrik,openlayers} would make the system able to plan routes over greater distances, and make sure that it always works with updated data.

Nodes and Ways cannot currently be found and retrieved in O(1) time, as the system has to search through the arrays of Nodes and Ways in order to find the data instead of just jumping straight to the correct index. A Hash map/table with a good hash-function could solve this, as they are able to search for and retrieve data in O(1) time by calculating the correct index, given a good hash-function.

Both Nodes and Ways are currently stored, but as long as inaccessible Ways and Nodes are filtered out when loading the data (As my system currently does), we only really need to store Nodes and Node-connections. The Node's type (eg. road, stairs, tree) would not matter, as any inaccessible or obsolete data will be removed before any path-finding is performed.

The user is currently not able to choose their method of locomotion or which type of PRM they are. Some PRMs like the elderly are are able to walk up a couple of steps, while others like those in wheelchairs would prefer to avoid stairs altogether. My system currently only considers wheelchair-users, but because it is very easy the change the three filters used to remove/retain routing-data, any other type of user could in theory be represented -- even motorists.

My algorithms are not very well optimised for use on longer routes, and use a lot of memory and time compared to other hierarchical path-finding systems\cite{botea-etal-jogd04,CCAI07}. The data is abstracted down to only Tower Nodes, but this is possibly still a lot more Nodes than other hierarchical path-finding systems need to store. My system can guarantee that optimality and completeness is preserved though.

There are a few places on the Penglais campus of Aberystwyth University that are labelled incorrectly, which can possibly result in inaccessible routes for certain PRMs. This can be corrected by updating these problem-areas manually, but I have not had the time to do this myself. The university probably has a few records pertaining to accessibility that could be useful to this end.

The system is not able to track the user and plan routes relative to their position. A route-planner should be able to recalculate a route if the user stops following it, as this could indicate that parts of the route might be inaccessible. The system is able to find the Node closest to a set of coordinates, which could be used to follow the user, but there is no localisation-functionality currently implemented.

Users currently have to click on or specify the coordinates of both the start and goal position before a route can be planned. The user might not know where it is, or might not know where the place they are trying to get to is. This could be fixed by letting the user search for building-names or similar identifiers, and plan routes relative to this information.

The data-type \textquotedblleft Relations\textquotedblright is currently not used by the system to plan routes. But because \textquotedblleft Relations\textquotedblright also represent abstract areas like bus-routes, they could serve as a great addition to a route-planner for PRMs who might not be able to travel over great distances.